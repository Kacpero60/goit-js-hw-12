{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nasync function fetchImages(query, page = 1) {\n    const API_KEY = '46136596-f3a48b293dc28723065feba0c';  \n    const URL = `https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=40&page=${page}`;\n    \n\n  try {\n    const response = await axios.get(URL);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\nconst form = document.querySelector('#search-form');  \nconst gallery = document.querySelector('#gallery');  \nconst loadMoreBtn = document.getElementById('load-more');\n\nform.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  currentQuery = event.target.query.value;\n  currentPage = 1;\n  gallery.innerHTML = ''; \n  loadMoreBtn.hidden = true;  \n  \n  const data = await fetchImages(currentQuery, currentPage);\n  renderGallery(data.hits);\n  totalHits = data.totalHits;\n  if (totalHits > 40) {\n    loadMoreBtn.hidden = false;\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage += 1;\n  const data = await fetchImages(currentQuery, currentPage);\n  renderGallery(data.hits);\n  smoothScroll();\n\n  if (currentPage * 40 >= totalHits) {\n    loadMoreBtn.hidden = true;\n    iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n  }\n});\n\nfunction smoothScroll() {\n  const { height: cardHeight } = document.querySelector('.gallery-item').getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["fetchImages","query","page","URL","axios","error","currentPage","currentQuery","totalHits","form","gallery","loadMoreBtn","event","data","smoothScroll","cardHeight"],"mappings":"svBAEA,eAAeA,EAAYC,EAAOC,EAAO,EAAG,CAExC,MAAMC,EAAM,qEAA6CF,CAAK,6EAA6EC,CAAI,GAGjJ,GAAI,CAEF,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACP,CACH,CAEA,IAAIC,EAAc,EACdC,EAAe,GACfC,EAAY,EAEhB,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,eAAe,WAAW,EAEvDF,EAAK,iBAAiB,SAAU,MAAOG,GAAU,CAC/CA,EAAM,eAAc,EACpBL,EAAeK,EAAM,OAAO,MAAM,MAClCN,EAAc,EACdI,EAAQ,UAAY,GACpBC,EAAY,OAAS,GAErB,MAAME,EAAO,MAAMb,EAAYO,EAAcD,CAAW,EACxD,cAAcO,EAAK,IAAI,EACvBL,EAAYK,EAAK,UACbL,EAAY,KACdG,EAAY,OAAS,GAEzB,CAAC,EAEDA,EAAY,iBAAiB,QAAS,SAAY,CAChDL,GAAe,EACf,MAAMO,EAAO,MAAMb,EAAYO,EAAcD,CAAW,EACxD,cAAcO,EAAK,IAAI,EACvBC,IAEIR,EAAc,IAAME,IACtBG,EAAY,OAAS,GACrB,SAAS,KAAK,CAAE,QAAS,4DAA8D,CAAA,EAE3F,CAAC,EAED,SAASG,GAAe,CACtB,KAAM,CAAE,OAAQC,GAAe,SAAS,cAAc,eAAe,EAAE,wBACvE,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}